@page
@model Educational_Platform_Front_End.Pages.Forum.IndexModel
@{
    ViewData["Title"] = "Forum";
}

<div class="forum-container">
    <div class="forum-header">
        <h1>All Questions</h1>
        <a asp-page="/Forum/Create" class="btn btn--primary">Ask Question</a>
    </div>

    <div class="forum-layout">
        <div class="main-content-forum">
            @if (Model.Threads != null && Model.Threads.Any())
            {
                <div class="thread-list">
                    @foreach (var thread in Model.Threads)
                    {
                        <div class="thread-card">
                            <div class="thread-stats">
                                <div class="stat-item stat-item--highlight">
                                    <span>@thread.VoteCount</span> votes
                                </div>
                                <div class="stat-item @(thread.PostCount > 0 ? "stat-item--answered" : "")">
                                    <span>@thread.PostCount</span> answers
                                </div>
                                <div class="stat-item">
                                    <span>0</span> views
                                </div>
                            </div>
                            <div class="thread-content">
                                <h3 class="thread-title">
                                    <a asp-page="/Forum/ThreadDetails" asp-route-id="@thread.Id">@thread.Title</a>
                                </h3>
                                <p class="thread-description">@thread.Description</p>
                                <div class="thread-meta">
                                    <div class="user-info">
                                        <div class="avatar user-avatar-sm">@(thread.UserName?[0].ToString().ToUpper() ?? "A")</div>
                                        <span>@(thread.UserName ?? "Anonymous")</span>
                                    </div>
                                    <span class="thread-date">asked @thread.CreatedAt.ToString("MMM dd, yyyy")</span>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            }
            else
            {
                <div class="empty-state">
                    <i class="lucide-message-circle empty-state-icon"></i>
                    <h3>No questions yet</h3>
                    <p>Be the first to ask a question!</p>
                    <a asp-page="/Forum/Create" class="btn btn--primary">Ask Question</a>
                </div>
            }
        </div>

        <aside class="sidebar">
            <div class="sidebar-card">
                <h4 class="sidebar-title">My Subscriptions</h4>
                @if (Model.SubscribedThreads != null && Model.SubscribedThreads.Any())
                {
                    <ul class="subscription-list">
                        @foreach (var sub in Model.SubscribedThreads)
                        {
                            <li class="subscription-item">
                                <a asp-page="/Forum/ThreadDetails" asp-route-id="@sub.ForumThreadId">@sub.ForumThreadTitle</a>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p class="empty-sidebar-text">You haven't subscribed to any threads yet.</p>
                }
            </div>
        </aside>
    </div>
</div>