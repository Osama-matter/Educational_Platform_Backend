@page
@model Educational_Platform_Front_End.Pages.Courses.IndexModel
@{
    ViewData["Title"] = "Course Catalog";
}
@section Styles {
    <link rel="stylesheet" href="~/css/courses-index.css" asp-append-version="true" />
}
<div class="catalog-page-wrapper">


    <!-- Toolbar -->
    <div class="toolbar sticky-top mb-10">
        <div class="container">
            <div class="toolbar-inner bg-glass shadow-sm p-4 flex justify-between items-center">
                <input type="text"
                       class="search-input"
                       placeholder="Search courses..." />

                <span class="results-count">
                    <strong>@Model.Courses?.Count()</strong> results
                </span>
            </div>
        </div>
    </div>

    <!-- COURSES GRID -->
    <div class="container pb-16">
        @if (!ViewData.ModelState.IsValid)
        {
            <div class="alert alert--danger" style="margin-bottom: 2rem; padding: 1.5rem; border-radius: 8px;">
                <h4 style="margin-bottom: 0.5rem; font-weight: 700;">System Notification</h4>
                <div asp-validation-summary="All"></div>
            </div>
        }

        @if (Model.Courses != null && Model.Courses.Any())
        {
            <div style="background: #f0fdf4; color: #15803d; padding: 0.75rem 1rem; border-radius: 6px; margin-bottom: 2rem; font-size: 0.875rem; border: 1px solid #bbf7d0;">
                <strong>Debug Info:</strong> Found @Model.Courses.Count() courses in the database.
            </div>
            
            <section class="course-grid-modern" id="courseList">

                @foreach (var course in Model.Courses)
                {
                    <article class="modern-card">

                        <div class="card-media">
                            <img src="@course.Image_URl"
                                 alt="@course.Title"
                                 class="course-thumbnail"
                                 loading="lazy" />
                        </div>

                        <div class="card-content">
                            <h2 class="card-title-lg">@course.Title</h2>

                            <p class="card-excerpt">
                                @course.Description
                            </p>

                            <div class="card-meta">
                                <div class="flex gap-3 items-center">
                                    @if (course.EstimatedDurationHours.HasValue)
                                    {
                                        <span class="meta-tag">
                                            ⏱ @course.EstimatedDurationHours hrs
                                        </span>
                                    }

                                    <span class="status-badge @(course.IsActive ? "active" : "inactive")">
                                        @(course.IsActive ? "Active" : "Draft")
                                    </span>
                                </div>

                                <a asp-page="/Courses/Details"
                                   asp-route-id="@course.Id"
                                   class="btn-circle-arrow">
                                    →
                                </a>
                            </div>
                        </div>

                    </article>
                }

            </section>
        }
        else
        {
            <div class="empty-state text-center">
                <h2>No courses found</h2>
                <p>Try again later.</p>
            </div>
        }
    </div>

</div>
